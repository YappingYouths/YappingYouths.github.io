<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Yapping Youths</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --discord-blurple: #5865F2;
      --discord-dark: #2C2F33;
      --discord-darker: #23272A;
      --discord-light: #FFFFFF;
      --discord-green: #57F287;
      --discord-black: #000000;
      --discord-grey: #99AAB5;
    }

    body {
      background-color: var(--discord-darker);
      color: var(--discord-light);
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header {
      background-color: var(--discord-blurple);
      width: 100%;
      padding: 1em;
      font-size: 1.5em;
      font-weight: bold;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.5);
    }

    #splashScreen {
      background-color: var(--discord-dark);
      border: 2px solid var(--discord-blurple);
      border-radius: 8px;
      padding: 2em;
      margin: 3em;
      max-width: 400px;
      text-align: center;
    }

    .player-count-group,
    #playerNamesInputs {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    input[type="number"],
    input[type="text"] {
      padding: 0.5em;
      border-radius: 4px;
      border: none;
      margin-top: 0.3em;
      font-size: 1em;
    }

    button {
      margin-top: 1em;
      background-color: var(--discord-blurple);
      color: var(--discord-light);
      border: none;
      padding: 0.5em 1em;
      font-weight: bold;
      cursor: pointer;
      border-radius: 6px;
      font-size: 1em;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #4752c4;
    }
  </style>
</head>
<body>
  <header>Yapping Youths</header>

  <div id="splashScreen">
    <h2>Enter Player Info</h2>
    <div class="player-count-group">
      <label>Number of Players (3-12):</label>
      <div style="display: flex; gap: 1em; align-items: center; justify-content: center; margin-top: 0.5em;">
        <button type="button" onclick="changePlayerCount(-1)">â€“</button>
        <input type="number" id="playerCount" min="3" max="12" value="3" readonly style="text-align: center; width: 50px;" />
        <button type="button" onclick="changePlayerCount(1)">+</button>
      </div>
    </div>
    <div id="playerNamesInputs"></div>
    <button id="startGameBtn">Start Game</button>
  </div>
<div id="gameScreen" style="display:none;">
    <div class="players" id="playersContainer"></div>

    <div id="cardsArea" style="display:flex; justify-content:center; gap:3em; flex-wrap:wrap; margin: 2em 0;">
      <div id="blackCard" class="card-display card-black">Click to draw Black Card</div>
      <div id="greenCard" class="card-display card-green">Click to draw Green Card</div>
    </div>

    <button id="nextRoundBtn">Next Round</button>

    <div id="rules" style="margin-top:3em; max-width:800px; font-size:1.1em; color:var(--discord-grey); padding:1em; border-top:2px solid var(--discord-blurple); text-align:center; font-style: italic;">
      <strong>Rules:</strong> Draw a black card and a green card. Players must answer the black card with an explanation, and must adhere to the rule of the green card. The judge then picks the best explanation and they receive a point. First to 4 points wins.
    </div>
  </div>

  <script>
    const deckA = Array.from({ length: 100 }, (_, i) => `a${i + 1}`);
    const deckB = Array.from({ length: 50 }, (_, i) => `b${i + 1}`);
    const maxPoints = 4;

    let players = [];
    let scores = [];
    let currentJudgeIndex = 0;
    let currentDeckA = [];
    let currentDeckB = [];

    const playerCountInput = document.getElementById('playerCount');
    const playerNamesInputs = document.getElementById('playerNamesInputs');
    const startGameBtn = document.getElementById('startGameBtn');
    const splashScreen = document.getElementById('splashScreen');
    const gameScreen = document.getElementById('gameScreen');
    const playersContainer = document.getElementById('playersContainer');
    const blackCardDiv = document.getElementById('blackCard');
    const greenCardDiv = document.getElementById('greenCard');
    const nextRoundBtn = document.getElementById('nextRoundBtn');

    function changePlayerCount(delta) {
      let count = Number(playerCountInput.value);
      count = Math.max(3, Math.min(12, count + delta));
      playerCountInput.value = count;
      createPlayerNameInputs();
    }

    function createPlayerNameInputs() {
      playerNamesInputs.innerHTML = "";
      let count = Number(playerCountInput.value);
      for (let i = 0; i < count; i++) {
        const label = document.createElement('label');
        label.textContent = `Player ${i + 1} Name:`;
        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = `Player ${i + 1}`;
        input.id = `playerName${i}`;
        playerNamesInputs.appendChild(label);
        playerNamesInputs.appendChild(input);
      }
    }

    createPlayerNameInputs();

    startGameBtn.addEventListener('click', () => {
      const count = Number(playerCountInput.value);
      if (count < 3) return alert('Minimum players is 3');

      players = [];
      for (let i = 0; i < count; i++) {
        const input = document.getElementById(`playerName${i}`);
        const name = input.value.trim();
        if (!name) return alert(`Please enter a name for Player ${i + 1}`);
        players.push(name);
      }

      scores = Array(players.length).fill(0);
      currentDeckA = [...deckA];
      currentDeckB = [...deckB];
      currentJudgeIndex = Math.floor(Math.random() * players.length);

      splashScreen.style.display = "none";
      gameScreen.style.display = "block";
      resetCards();
      renderPlayers();
    });

    function renderPlayers() {
      playersContainer.innerHTML = "";
      players.forEach((player, idx) => {
        const div = document.createElement('div');
        div.className = "player-card";
        div.id = `player-${idx}`;

        const isJudge = idx === currentJudgeIndex;
        div.innerHTML = `
          <div class="judge-badge">${isJudge ? "ðŸŽ¤ Judge" : ""}</div>
          <div class="player-name">${player}</div>
          <div class="winner-tag" id="winner-${idx}"></div>
          <div class="score" id="score-${idx}">${scores[idx]}</div>
          <div class="score-controls">
            <button onclick="adjustScore(${idx}, -1)">â€“</button>
            <button onclick="adjustScore(${idx}, 1)">+</button>
          </div>
        `;

        playersContainer.appendChild(div);
      });
    }

    window.adjustScore = function(idx, delta) {
      if (idx === currentJudgeIndex && delta > 0) return alert("Judges can't score during their round!");
      scores[idx] = Math.max(0, scores[idx] + delta);
      document.getElementById(`score-${idx}`).textContent = scores[idx];
      checkWinner();
    };

    function checkWinner() {
      players.forEach((_, idx) => {
        document.getElementById(`winner-${idx}`).textContent = "";
      });

      const winnerIndex = scores.findIndex(score => score >= maxPoints);
      if (winnerIndex !== -1) {
        document.getElementById(`winner-${winnerIndex}`).textContent = "ðŸ† Winner!";
      }
    }

    function resetCards() {
      blackCardDiv.innerHTML = "Click to draw Black Card";
      greenCardDiv.innerHTML = "Click to draw Green Card";
    }

    function drawCard(deck) {
      if (deck.length === 0) return null;
      const i = Math.floor(Math.random() * deck.length);
      return deck.splice(i, 1)[0];
    }

    blackCardDiv.addEventListener('click', () => {
      if (currentDeckA.length === 0) currentDeckA = [...deckA];
      const card = drawCard(currentDeckA);
      blackCardDiv.innerHTML = card ? `<img src="deck_a/${card}.png" alt="${card}" />` : "No more cards in Deck A";
    });

    greenCardDiv.addEventListener('click', () => {
      if (currentDeckB.length === 0) currentDeckB = [...deckB];
      const card = drawCard(currentDeckB);
      greenCardDiv.innerHTML = card ? `<img src="deck_b/${card}.png" alt="${card}" />` : "No more cards in Deck B";
    });

    nextRoundBtn.addEventListener('click', () => {
      currentJudgeIndex = (currentJudgeIndex + 1) % players.length;
      renderPlayers();
      resetCards();
    });
  </script>
</body>
</html>